# LG Formater

**Версия:** 0.0.0.1  
**Автор:** Kudryavtsev Mikhail  
**Описание:** Система для работы с источниками данных

## Установка и запуск

1. Создайте виртуальную среду:
```bash
python3 -m venv venv
```

2. Активируйте виртуальную среду:
```bash
source venv/bin/activate  # Linux/Mac
# или
venv\Scripts\activate     # Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Выполните миграции:
```bash
python manage.py migrate
```

5. Создайте суперпользователя:
```bash
python manage.py createsuperuser
```

6. Запустите сервер разработки:

**Вариант 1 - через скрипт:**
```bash
./start_server.sh
```

**Вариант 2 - вручную:**
```bash
python manage.py runserver 192.168.3.16:8001
```

Сервер будет доступен по адресу: http://192.168.3.16:8001

## Доступ к разделам системы:

- **Админ-панель:** http://192.168.3.16:8001/admin/
- **Источники данных:** http://192.168.3.16:8001/data-sources/
- **Шаблоны этикеток:** http://192.168.3.16:8001/label-templates/
- **Генератор этикеток:** http://192.168.3.16:8001/generator/

## Структура проекта

- `lg_formater/` - основной проект Django
- `data_sources/` - приложение "Источники данных"
- `label_templates/` - приложение "Шаблоны этикеток"
- `label_generator/` - приложение "Генератор этикеток"
- `media/` - папка для загруженных файлов
- `version.py` - информация о версии проекта
- `requirements.txt` - зависимости проекта

## Функциональность

### Приложение "Источники данных":
- **CSVUploadLog** - журнал загрузки CSV файлов с метаданными
- **CSVData** - данные из CSV файлов (по ячейкам)
- **CSVColumn** - информация о столбцах CSV файлов

### Приложение "Шаблоны этикеток":
- **LabelTemplate** - шаблоны этикеток (PDF, JPEG, PNG, SVG, DOCX)
  - **Шаблоны с файлами** - загрузка готовых шаблонов
  - **Шаблоны с чистого листа** - создание без файла, только с размерами
  - Автоматическое определение размеров при загрузке файлов
  - Область печати и область макета (под обрез)
  - Настройка отступов
- **TemplateField** - поля данных в шаблонах с позиционированием
- **TemplateUsage** - журнал использования шаблонов для генерации

### Приложение "Генератор этикеток":
- **LabelGeneration** - журнал генерации этикеток
  - Выбор источника данных и шаблона
  - Настройка параметров генерации
  - Отслеживание прогресса и статуса
  - Сохранение результатов в PDF формате
- **FieldMapping** - сопоставление полей источника данных с полями шаблона
  - Inline форма в админ-панели
  - Настройка обязательности и значений по умолчанию
  - Форматирование данных (даты, числа, текст)
- **GenerationLog** - детальный лог процесса генерации
- **LabelPDFGenerator** - класс для генерации PDF с этикетками
  - Поддержка фоновых изображений из шаблонов
  - Автоматическое позиционирование текста
  - Настройка размеров страниц по шаблону

### Возможности:
- Загрузка CSV файлов с сохранением исходного файла
- Обработка заголовков столбцов
- Создание и управление шаблонами этикеток
- **Создание шаблонов с чистого листа** без файлов
- **Автоматическое определение размеров** при загрузке файлов
- **Разделение на область печати и область макета** (под обрез)
- **Настройка отступов** между областями
- **Генерация PDF этикеток** с применением шаблонов
- **Сопоставление полей данных** с полями шаблона
- **Inline формы** для настройки сопоставления полей
- **Отслеживание прогресса** генерации в реальном времени
- **Детальное логирование** процесса генерации
- **Автоматическое позиционирование** текста на этикетках
- **Поддержка фоновых изображений** из шаблонов
- Настройка полей данных в шаблонах
- Скачивание исходных файлов и шаблонов
- API для интеграции с внешними системами
- Управление данными через Django Admin
- Безопасный доступ к файлам (только автор или суперпользователь)
